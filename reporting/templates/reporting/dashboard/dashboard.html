{% extends 'base.html' %}
{% load static %}
// le titre de la page
{% block title %} <title>Dashboard</title> {% endblock title %}
{% block style %}
    <link rel="stylesheet" href="{% static 'css/style_dashboard.css' %}"/>
{% endblock style %}
{% block script %}
    <script src="{% static 'scripts/plotly.js' %}"></script>
    <script src="{% static 'scripts/dashboard_script.js' %}" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
          integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
{% endblock script %}

// Visualisation des graphes

{% block content %}

    <main class="main-content">
        <div class="dashboard">

            <div class="main">
                <div class="title-and-button">
                    <h1 class="title">Rapport</h1>
                </div>
                <div class="month-picker-container">
                    <div class="month-picker-button">
                        <label for="monthInput">Mois: </label>
                        <input type="month" id="monthInput" name="monthPicker" onchange="myFunction(this.value)">
                    </div>
                    <button class="download-button">
                        <i class="fas fa-download"></i> Télécharger
                    </button>
                </div>

                <div class="info-container">
                    <div class="new-div">
                        <p>Critical</p>
                        <h2  id="total_critical">{{ somme_patchs.total_critical }}</h2>
                    </div>
                    <div class="new-div">
                        <p>Important</p>
                        <h2 id="total_important">{{ somme_patchs.total_important }}</h2>
                    </div>
                    <div class="new-div" >
                        <p>Moderate</p>
                        <h2 id="total_moderate">{{ somme_patchs.total_moderate }}</h2>
                    </div>
                    <div class="new-div">
                        <p>Low</p>
                        <h2 id="total_low">{{ somme_patchs.total_low }}</h2>
                    </div>
                </div>
            </div>

        </div>


        <div class="graph-container">
            <div>
                         <div class="tab">
                      <table>
                    <tr>
                      <th colspan="2">PROD</th>
                    </tr>
                    <tr>
                      <td>Patched</td>
                      <td  style="background-color: green;" id="td-patched__val">10</td>
                    </tr>
                    <tr>
                      <td>Not Pacthed</td>
                      <td style="background-color: red;" id="td-notpatched__val">185</td>
                    </tr>
                    <tr>
                      <td style="border: none;"></td>
                      <td style="background-color: orange;" id="td-total__val"> 195</td>
                    </tr>
                  </table>
                </div>
                    <div id="prod-plot" class="graph"></div>


            </div>

            <div>
                   <div class="tab">
                      <table>
                    <tr>
                          <th colspan="2">HORS-ROD</th>
                    </tr>
                    <tr>
                      <td>Patched</td>
                      <td  style="background-color: green;" id="td-patched__val">10</td>
                    </tr>
                    <tr>
                      <td>Not Pacthed</td>
                      <td style="background-color: red;" id="td-notpatched__val">185</td>
                    </tr>
                    <tr>
                      <td style="border: none;"></td>
                      <td style="background-color: orange;" id="td-total__val"> 195</td>
                    </tr>
                  </table>
                </div>
                    <div id="hors_prod-plot" class="graph"></div>

            </div>


               <div>
                      <div class="tab">
                      <table>
                    <tr>
                      <th colspan="2">TOTAL</th>
                    </tr>
                    <tr>
                      <td>Patched</td>
                      <td  style="background-color: green;" id="td-patched__val">10</td>
                    </tr>
                    <tr>
                      <td>Not Pacthed</td>
                      <td style="background-color: red;" id="td-notpatched__val">185</td>
                    </tr>
                    <tr>
                      <td style="border: none;"></td>
                      <td style="background-color: orange;" id="td-total__val"> 195</td>
                    </tr>
                  </table>
                </div>
                    <div id="total-plot" class="graph"></div>

               </div>

        </div>

    </main>





{% endblock content %}